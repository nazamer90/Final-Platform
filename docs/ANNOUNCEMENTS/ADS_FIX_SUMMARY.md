# ููุฎุต ุงูุฅุตูุงุญุงุช - ูุธุงู ุงูุฅุนูุงูุงุช ๐ฏ

## ุงููุดุงูู ุงูููุชุดูุฉ ูุงูุญููู

### โ ุงููุดููุฉ 1: API URL ุบูุฑ ุงูุตุญูุญ
**ุงูููู**: `src/pages/StorePage.tsx:51`
**ุงููุดููุฉ**: 
```tsx
const response = await fetch(`/api/ads/store/${storeSlug}`);
```
- ูู ููู ูุณุชุฎุฏู `VITE_API_URL` ุงููุงูู
- ูุฏ ูุง ูุตู ููู API ุจุดูู ุตุญูุญ

**ุงูุญู**: โจ
```tsx
const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';
const response = await fetch(`${apiUrl}/ads/store/${store.id}`);
```

---

### โ ุงููุดููุฉ 2: placement values ูุฎุชููุฉ
**ุงูููู**: `src/pages/StorePage.tsx:249, 297`
**ุงููุดููุฉ**:
- ุนูุฏ ูุดุฑ ุงูุฅุนูุงู: `'floating'` โ ููุญูู ุฅูู `'banner'` (ูุญููุธ ูู DB)
- ุนูุฏ ูุดุฑ ุงูุฅุนูุงู: `'grid'` โ ููุญูู ุฅูู `'between_products'` (ูุญููุธ ูู DB)
- ุนูุฏ ุนุฑุถ ุงูุฅุนูุงูุงุช: ุงูุจุญุซ ุนู `'floating'` ู `'grid'` (ูุง ุชูุฌุฏ!)

**ุงูุญู**: โจ
```tsx
// ูุจู
storeAds.filter(ad => ad.placement === 'floating')   // โ ูู ุชุฌุฏ ุดูุก
storeAds.filter(ad => ad.placement === 'grid')       // โ ูู ุชุฌุฏ ุดูุก

// ุจุนุฏ
storeAds.filter(ad => ad.placement === 'banner')            // โ
storeAds.filter(ad => ad.placement === 'between_products')  // โ
```

---

### โ ุงููุดููุฉ 3: ุงูุฅุนูุงูุงุช ุชุธูุฑ ูุฑุฉ ูุงุญุฏุฉ ููุท
**ุงูููู**: `src/pages/StorePage.tsx:297`
**ุงููุดููุฉ**:
```tsx
{index === 4 && storeAds.filter(ad => ad.placement === 'between_products').length > 0 && (
```
- ุงูุฅุนูุงู ูุธูุฑ **ููุท** ุนูุฏ ุงูููุชุฌ ุงูุฎุงูุณ (index = 4)
- ุฅุฐุง ูุงู ูุฏูู ุฃูู ูู 5 ููุชุฌุงุช = ูุง ุฅุนูุงู!
- ุฅุฐุง ูุงู ูุฏูู 10 ููุชุฌุงุช = ุฅุนูุงู ูุงุญุฏ ููุท!

**ุงูุญู**: โจ
```tsx
{((index + 1) % 4 === 0) && storeAds.filter(ad => ad.placement === 'between_products').length > 0 && (
```
- ุงูุขู ุงูุฅุนูุงู ูุธูุฑ **ูู 4 ููุชุฌุงุช**:
  - ุจุนุฏ ุงูููุชุฌ 4 (index 3)
  - ุจุนุฏ ุงูููุชุฌ 8 (index 7)
  - ุจุนุฏ ุงูููุชุฌ 12 (index 11)
  - ุฅูุฎ...

---

### โ ุงููุดููุฉ 4: storeId ุบูุฑ ูุชุณู
**ุงููููุงุช**: `src/pages/EnhancedMerchantDashboard.tsx`
**ุงููุดููุฉ**:
- ุชุฑุชูุจ ุงูุฃููููุงุช ูุฎุชูู ูู ุฃูุงูู ูุฎุชููุฉ
- ูุฏ ูุชู ุฅุฑุณุงู `slug` ุจุฏูุงู ูู ุงูุฑูู ุงููุนูู ููู storeId

**ุงูุญู**: โจ ุชูุญูุฏ ุงูุทุฑููุฉ ูู ุฌููุน ุงูุฃูุงูู:
```tsx
// ุงูุชุฑุชูุจ ุงูุตุญูุญ: ุงูุฃููููุฉ ููุฑููุ ุซู slug
const storeNumId = merchantStoreData?.storeId || merchantStoreData?.id || currentMerchant?.id;
const storeSlugId = merchantStoreSlug || merchantStoreData?.slug || merchantStoreData?.storeSlug;
const storeId = storeNumId || storeSlugId;
```

---

## ๐ ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ

1. **ูู ูุงุฌูุฉ ุงูุชุงุฌุฑ**:
   - ุงุฐูุจ ุฅูู **ุงูุฅุนูุงูุงุช** (Settings โ Ads)
   - ุงููุฑ **ุฅุนูุงู ุฌุฏูุฏ**

2. **ูุดุฑ ุงูุฅุนูุงู**:
   - ุงุฎุชุฑ ูุงูุจ ูู ุงูููุงูุจ
   - ุฃุถู **ุนููุงู** ู**ูุต**
   - ุงุฎุชุฑ ููุน ุงูููุถุน:
     - **ุนุงุฆู ุจุฃุนูู ุงููุชุฌุฑ** โ ุณูุธูุฑ ูู ุฃุนูู ุงููุชุฌุฑ
     - **ุจูู ุงูููุชุฌุงุช** โ ุณูุธูุฑ ุจุนุฏ ูู 4 ููุชุฌุงุช
   - ุงููุฑ **ูุดุฑ ุงูุฅุนูุงู** โ

3. **ุชุญูู ูู ุงููุชุฌุฑ**:
   - ุบุงุฏุฑ ูุงุฌูุฉ ุงูุชุงุฌุฑ
   - ุงุฐูุจ ููุชุฌุฑู (ูุซู: `http://localhost:5174/nawaem`)
   - ูุฌุจ ุฃู ุชุฑู ุงูุฅุนูุงู!

---

## ๐ Debug Tips

ูุชุญ Developer Console (F12) ูุงุจุญุซ ุนู:

```javascript
// ูุฌุจ ุฃู ุชุฑู ุฑุณุงุฆู ูุซู:
[StorePage] Ads loaded for store 1: [{...}, {...}]
[handlePublishAd] Publishing ad: {storeId: 1, ...}
[loadPublishedAds] Loading ads for storeId: 1
```

ุฅุฐุง ูู ุชุฑ ูุฐู ุงูุฑุณุงุฆูุ ุชุญูู ูู:
- โ ูู ุฃูุช ูุชุณุฌู ุงูุฏุฎูู ุจุดูู ุตุญูุญุ
- โ ูู ุชู ูุดุฑ ุงูุฅุนูุงู ุจูุฌุงุญ (ุณุชุดูู `alert`)?
- โ ูู ุชูุชุธุฑ ููููุงู ูุจู ุงูุฐูุงุจ ูููุชุฌุฑุ

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

1. โ `src/pages/StorePage.tsx` - ุชุตุญูุญ ุฌูุจ ุงูุฅุนูุงูุงุช ูุนุฑุถูุง
2. โ `src/pages/EnhancedMerchantDashboard.tsx` - ุชูุญูุฏ ุทุฑููุฉ ุชุญุฏูุฏ storeId
3. โ `src/App.tsx` - ุฅุตูุงุญ regex escape ู string type issues

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2025-12-08
**ุงูุญุงูุฉ**: โจ ุฌุงูุฒ ููุงุฎุชุจุงุฑ
