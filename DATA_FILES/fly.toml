# ==========================================
# ๐ FLY.IO CONFIGURATION FILE
# ==========================================
# ูุฐุง ุงูููู ูุญุฏุฏ ููููุฉ ูุดุฑ ูุชุดุบูู Backend ุนูู Fly.io

# ุงุณู ุงูุชุทุจูู ุนูู Fly.io (ุณุชุฎุชุงุฑูู ูุฐุง ุงูุงุณู ุนูุฏ fly launch)
app = "eishro-backend"

# ุงูููุทูุฉ ุงูุฌุบุฑุงููุฉ ุงูุฑุฆูุณูุฉ (Frankfurt - ุงูุฃูุฑุจ ูููุจูุง)
primary_region = "fra"

# ==========================================
# ๐๏ธ BUILD CONFIGURATION
# ==========================================
[build]
  # ุงุณุชุฎุฏุงู Dockerfile ุงูููุฌูุฏ ูู ุงููุดุฑูุน
  dockerfile = "Dockerfile"

# ==========================================
# ๐ ENVIRONMENT VARIABLES (ุบูุฑ ุณุฑูุฉ)
# ==========================================
[env]
  PORT = "8080"
  NODE_ENV = "production"

# ==========================================
# ๐ HTTP SERVICE CONFIGURATION
# ==========================================
[http_service]
  # ุงููููุฐ ุงูุฏุงุฎูู ุงูุฐู ูุณุชูุน ุนููู Express
  internal_port = 8080
  
  # ุฅุฌุจุงุฑ ุงุณุชุฎุฏุงู HTTPS
  force_https = true
  
  # ุนุฏู ุฅููุงู ุงููุงูููุงุช ุชููุงุฆูุงู (ููุจูุงุก ูุดุท 24/7)
  auto_stop_machines = false
  
  # ุชุดุบูู ุงููุงูููุงุช ุชููุงุฆูุงู ุนูุฏ ุงูุญุงุฌุฉ
  auto_start_machines = true
  
  # ุนุฏุฏ ุงููุงูููุงุช ุงูุชู ุชุจูู ุชุนูู ุฏุงุฆูุงู
  min_machines_running = 1
  
  # ุนุฏุฏ ุงููุงูููุงุช ุงููุตูู
  max_machines_running = 2

  # Health check configuration
  [http_service.checks]
    [http_service.checks.health]
      # ุงููุณุงุฑ ููุชุญูู ูู ุตุญุฉ ุงูุชุทุจูู
      path = "/health"
      # ุงููุชุฑุฉ ุงูุฒูููุฉ ุจูู ูู ูุญุต (10 ุซูุงูู)
      interval = "10s"
      # ุงูููุช ุงููุณููุญ ููุงูุชุธุงุฑ ูุจู ุงุนุชุจุงุฑ ุงููุญุต ูุงุดู
      timeout = "5s"
      # ุนุฏุฏ ุงููุญุงููุงุช ุงููุงุดูุฉ ูุจู ุงุนุชุจุงุฑ ุงูุชุทุจูู ูุนุทู
      grace_period = "30s"

# ==========================================
# ๐ป VIRTUAL MACHINE CONFIGURATION
# ==========================================
[[vm]]
  # ููุน ุงููุนุงูุฌ (shared = ูุดุชุฑู - ูุฌุงูู)
  cpu_kind = "shared"
  
  # ุนุฏุฏ ุงูุฃูููุฉ (1 = ูุฌุงูู)
  cpus = 1
  
  # ุญุฌู ุงูุฐุงูุฑุฉ ุจุงูููุฌุงุจุงูุช (256MB = ูุฌุงูู)
  memory_mb = 256

# ==========================================
# ๐ PERSISTENT STORAGE (ุงุฎุชูุงุฑู)
# ==========================================
# ุฅุฐุง ุงุญุชุฌุช ุชุฎุฒูู ูููุงุช ุฏุงุฆู (uploads, logs)
# [[mounts]]
#   source = "uploads_volume"
#   destination = "/app/uploads"

# ==========================================
# ๐ IMPORTANT NOTES:
# ==========================================
# 1. ูุฐุง ุงูููู ููุฑูุน ุฅูู Git
# 2. ุงููุชุบูุฑุงุช ุงูุณุฑูุฉ (secrets) ุชูุถุงู ุจุฃูุฑ: fly secrets set KEY=VALUE
# 3. ุจุนุฏ ุงูุชุนุฏููุ ุงุณุชุฎุฏูู: fly deploy
# 4. ูุนุฑุถ ุงูุณุฌูุงุช: fly logs
# 5. ููุชุญ Dashboard: fly dashboard
