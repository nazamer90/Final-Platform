import{r as h,j as e,B as g,A as de,q as pe,b as oe,c as U,C as S,a as k,g as me,d as xe,w as M,x as P,L as C,I as q,D as je,E as ee,F as W,y as ue,G as se}from"./index-CcNjQh2v.js";import{B as ae}from"./badge-DXI0UTzt.js";import{S as re,a as le,b as te,c as ne,d as ie}from"./select-CA2aZ3FQ.js";import{T as ce}from"./textarea-BJcIlJeV.js";import{e as ge,o as fe}from"./moamalat-WGflxn6X.js";import{C as Ne}from"./CouponMessageModal-Bnm18B7a.js";import{M as ve}from"./minus-CEXB3BVj.js";import{P as ye}from"./plus-pekqOudl.js";import{T as be}from"./trash-2-NiObV7lF.js";import{M as we}from"./map-pin-Don1UAO2.js";import{C as K}from"./clock-CBxiAAIw.js";import{C as Ce}from"./credit-card-4AFxR62e.js";const Se='<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80"><rect width="80" height="80" rx="12" fill="#f9fafb"/><path d="M24 32h32" stroke="#d1d5db" stroke-width="4" stroke-linecap="round"/><path d="M28 42h24" stroke="#d1d5db" stroke-width="4" stroke-linecap="round"/><rect x="20" y="28" width="40" height="24" rx="6" fill="none" stroke="#9ca3af" stroke-width="4"/></svg>',z=`data:image/svg+xml;utf8,${encodeURIComponent(Se)}`,Ve=({cartItems:a,onBack:t,onUpdateQuantity:m,onRemoveItem:v,onOrderComplete:f})=>{const[o,i]=h.useState("cart"),[p,b]=h.useState(""),[c,T]=h.useState(null),[L,N]=h.useState(!1),[r,j]=h.useState("success"),[u,y]=h.useState(""),[w,I]=h.useState({firstName:"",lastName:"",phone:"",alternativePhone:"",city:"",area:"",address:"",currentLocation:!1}),[O,X]=h.useState("onDelivery"),[F,n]=h.useState(""),[x,E]=h.useState("normal-tripoli"),[R,V]=h.useState(""),s=[w.firstName,w.lastName].filter(Boolean).join(" ").trim();function l(G,$){if(!$)return 0;switch($){case"normal-tripoli":return Math.floor(Math.random()*16)+30;case"normal-outside":return Math.floor(Math.random()*36)+50;case"express-tripoli":return Math.floor(Math.random()*36)+85;case"express-outside":return Math.floor(Math.random()*66)+120;default:return 30}}const d=a.reduce((G,$)=>G+$.product.price*$.quantity,0),_=c?Math.round(d*(c.discount/100)):0,Y=l(w.city,x),H=d-_+Y,Z=()=>{if(p.trim()===""){j("error"),y("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¨ÙˆÙ† Ø§Ù„ØªØ®ÙÙŠØ¶"),N(!0);return}const G=localStorage.getItem("eshro_reward_coupon_data")||sessionStorage.getItem("eshro_reward_coupon_data"),$=localStorage.getItem("eshro_user_coupon")||sessionStorage.getItem("eshro_user_coupon"),Q=A=>{if(!A)return null;try{return JSON.parse(A)}catch{return null}},J=Q(G)||Q($),D=je.find(A=>A.code===p);let B=null;if(J&&J.code===p){const A=new Date(J.createdAt);if((new Date().getTime()-A.getTime())/(1e3*60*60)<=24)B=J;else{j("error"),y("Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© ÙƒÙˆØ¨ÙˆÙ† Ø§Ù„Ø®ØµÙ… (ØµØ§Ù„Ø­ Ù„Ù…Ø¯Ø© 24 Ø³Ø§Ø¹Ø© ÙÙ‚Ø·)"),N(!0);return}}else D&&(B=D);B?(T(B),j("success"),y(`Ù…Ø¨Ø±ÙˆÙƒ Ù„Ù‚Ø¯ ÙØ²Øª Ù…Ø¹Ù†Ø§ Ø¨ÙƒÙˆØ¨ÙˆÙ† Ø®ØµÙ…!
Ø®ØµÙ… Ø®Ø±Ø§ÙÙŠ Ø¨Ù‚ÙŠÙ…Ø© ${B.discount||50}% Ù…Ù† Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø´ØªØ±ÙŠØ§ØªÙƒ
Ù†ØªÙ…Ù†Ù‰ Ù„Ùƒ Ø§Ù„ØªÙˆÙÙŠÙ‚ØŒ Ù…Ø¹ Ø¥Ø´Ø±Ùˆ ØªØ®Ù„ÙŠÙƒÙ… ØªØ´Ø±ÙˆØ§`),N(!0)):(j("error"),y("ÙƒÙˆØ¨ÙˆÙ† Ø§Ù„ØªØ®ÙÙŠØ¶ ØºÙŠØ± ØµØ§Ù„Ø­"),N(!0))};return a.length===0?e.jsx(ke,{onBack:t}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b sticky top-0 z-40",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(g,{variant:"ghost",size:"sm",onClick:t,className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),"Ø§Ù„Ø¹ÙˆØ¯Ø©"]}),e.jsxs("h1",{className:"text-lg font-semibold text-gray-900",children:[o==="cart"&&"Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚",o==="checkout"&&"Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨",o==="payment"&&"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5 text-primary"}),e.jsxs("span",{className:"font-semibold",children:[a.length," Ù‚Ø·Ø¹Ø©"]})]})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[o==="cart"&&e.jsx(Me,{cartItems:a,onUpdateQuantity:m,onRemoveItem:v,subtotal:d,discountAmount:_,total:H,couponCode:p,setCouponCode:b,appliedCoupon:c,applyCoupon:Z,onContinueShopping:t,onCheckout:()=>i("checkout")}),o==="checkout"&&e.jsx(Pe,{cartItems:a,customerData:w,setCustomerData:I,paymentMethod:O,setPaymentMethod:X,paymentType:F,setPaymentType:n,shippingType:x,setShippingType:E,notes:R,setNotes:V,subtotal:d,discountAmount:_,shippingCost:Y,total:H,appliedCoupon:c,couponCode:p,setCouponCode:b,applyCoupon:Z,onBack:()=>i("cart"),onConfirmOrder:()=>i("payment")}),o==="payment"&&e.jsx(Le,{orderData:{items:a,customer:{...w,name:s},payment:{method:O,type:F||"Ù…Ø¹Ø§Ù…Ù„Ø§Øª"},shipping:{type:x,cost:Y},notes:R,subtotal:d,discountAmount:_,total:H,coupon:c},onBack:()=>i("checkout"),onPaymentComplete:f})]}),e.jsx(Ne,{isOpen:L,onClose:()=>N(!1),type:r,message:u,couponCode:r==="success"&&c?c.code:void 0,discountPercentage:r==="success"&&c?c.discount:void 0})]})},ke=({onBack:a})=>e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-8xl mb-4",children:"ğŸ›’"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ ÙØ§Ø±ØºØ©"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯"}),e.jsx(g,{onClick:a,className:"bg-primary hover:bg-primary/90",children:"Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ³ÙˆÙ‚"})]})}),Me=({cartItems:a,onUpdateQuantity:t,onRemoveItem:m,subtotal:v,discountAmount:f,total:o,couponCode:i,setCouponCode:p,appliedCoupon:b,showCouponSuccess:c,applyCoupon:T,onContinueShopping:L,onCheckout:N})=>e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„Ø³Ù„Ø©"}),a.map(r=>{const j=oe(r.product,U);return e.jsx(S,{className:"overflow-hidden",children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden flex-shrink-0",children:e.jsxs("picture",{children:[j.pictureSources.map(u=>{const y=me(u);return e.jsx("source",{srcSet:u,...y?{type:y}:{}},u)}),e.jsx("img",{src:j.primary,alt:r.product.name,loading:"lazy",decoding:"async",className:"w-full h-full object-cover","data-image-sources":JSON.stringify(j.datasetSources),"data-image-index":"0","data-fallback-src":U,onError:xe})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:r.product.name}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Ø§Ù„Ù…Ù‚Ø§Ø³: ",r.size," â€¢ Ø§Ù„Ù„ÙˆÙ†: ",r.color]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:()=>t(r.id,Math.max(1,r.quantity-1)),disabled:r.quantity<=1,children:e.jsx(ve,{className:"h-3 w-3"})}),e.jsx("span",{className:"font-semibold px-3",children:r.quantity}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>t(r.id,r.quantity+1),children:e.jsx(ye,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"font-bold text-primary",children:[r.product.price*r.quantity," Ø¯.Ù„"]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>m(r.id),className:"text-red-500 hover:text-red-700 p-1",children:e.jsx(be,{className:"h-4 w-4"})})]})]})]})]})})},`${r.product.id}-${r.size}-${r.color}`)})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(S,{children:[e.jsx(M,{children:e.jsx(P,{children:"Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨"})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ (",a.reduce((r,j)=>r+j.quantity,0)," Ù‚Ø·Ø¹Ø©)"]}),e.jsxs("span",{className:"font-semibold",children:[v," Ø¯.Ù„"]})]}),f>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Ø§Ù„ØªØ®ÙÙŠØ¶"}),e.jsxs("span",{className:"font-semibold",children:["-",f," Ø¯.Ù„"]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ"}),e.jsxs("span",{className:"text-primary",children:[o," Ø¯.Ù„"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"ÙƒÙˆØ¨ÙˆÙ† Ø§Ù„ØªØ®ÙÙŠØ¶"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{value:i,onChange:r=>p(r.target.value),placeholder:"Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†"}),e.jsx(g,{variant:"outline",onClick:T,children:"ØªØ·Ø¨ÙŠÙ‚"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{variant:"outline",className:"w-full",onClick:L,children:"Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ³ÙˆÙ‚"}),e.jsx(g,{className:"w-full bg-primary hover:bg-primary/90",onClick:N,children:"Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨"})]})]})]})})]}),Pe=({cartItems:a,customerData:t,setCustomerData:m,paymentMethod:v,setPaymentMethod:f,paymentType:o,setPaymentType:i,shippingType:p,setShippingType:b,notes:c,setNotes:T,subtotal:L,discountAmount:N,shippingCost:r,total:j,appliedCoupon:u,couponCode:y,setCouponCode:w,applyCoupon:I,showCouponSuccess:O,onBack:X,onConfirmOrder:F})=>{var V;const[n,x]=h.useState(!1),E=()=>{if(!t.firstName||!t.lastName||!t.phone||!t.city||!t.area||!o||!p){alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");return}F()},R=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(s=>{m(l=>({...l,currentLocation:!0,address:l.address+` (GPS: ${s.coords.latitude}, ${s.coords.longitude})`}))},s=>{x(!0),setTimeout(()=>x(!1),3e3)})};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(S,{children:[e.jsx(M,{children:e.jsx(P,{children:"Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©"})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(C,{htmlFor:"firstName",children:"Ø§Ù„Ø§Ø³Ù… *"}),e.jsx(q,{id:"firstName",value:t.firstName,onChange:s=>m(l=>({...l,firstName:s.target.value})),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø£ÙˆÙ„"})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"lastName",children:"Ø§Ù„Ù„Ù‚Ø¨ *"}),e.jsx(q,{id:"lastName",value:t.lastName,onChange:s=>m(l=>({...l,lastName:s.target.value})),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(C,{htmlFor:"phone",children:"Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ *"}),e.jsx(q,{id:"phone",value:t.phone,onChange:s=>m(l=>({...l,phone:s.target.value})),placeholder:"091XXXXXXX"})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"alternativePhone",children:"Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ"}),e.jsx(q,{id:"alternativePhone",value:t.alternativePhone,onChange:s=>m(l=>({...l,alternativePhone:s.target.value})),placeholder:"092XXXXXXX"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(C,{htmlFor:"city",children:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© *"}),e.jsxs(re,{value:t.city,onValueChange:s=>m(l=>({...l,city:s,area:""})),children:[e.jsx(le,{children:e.jsx(te,{placeholder:"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"})}),e.jsx(ne,{children:Object.entries(ee).map(([s,l])=>e.jsx(ie,{value:s,children:l.name},s))})]})]}),t.city&&e.jsxs("div",{children:[e.jsx(C,{htmlFor:"area",children:"Ø§Ù„Ù…Ù†Ø·Ù‚Ø© *"}),e.jsxs(re,{value:t.area,onValueChange:s=>m(l=>({...l,area:s})),children:[e.jsx(le,{children:e.jsx(te,{placeholder:"Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©"})}),e.jsx(ne,{className:"max-h-48 overflow-y-auto",children:(V=ee[t.city])==null?void 0:V.areas.map(s=>e.jsx(ie,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"address",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙØµÙŠÙ„ÙŠ"}),e.jsx(ce,{id:"address",value:t.address,onChange:s=>m(l=>({...l,address:s.target.value})),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙØµÙŠÙ„ÙŠ...",rows:3})]}),e.jsxs(g,{variant:"outline",onClick:R,className:"w-full",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ"]}),n&&e.jsx("p",{className:"text-red-500 text-sm",children:"Ù„Ù… Ù†ØªÙ…ÙƒÙ† Ù…Ù† ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ. ÙŠØ±Ø¬Ù‰ ØªÙØ¹ÙŠÙ„ Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹."})]})]}),e.jsxs(S,{children:[e.jsx(M,{children:e.jsx(P,{children:"Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹"})}),e.jsx(k,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"radio",id:"onDelivery",name:"paymentMethod",checked:v==="onDelivery",onChange:()=>f("onDelivery")}),e.jsx("label",{htmlFor:"onDelivery",className:"font-medium",children:"Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…"})]}),v==="onDelivery"&&e.jsx("div",{className:"mr-6 space-y-2",children:W.onDelivery.methods.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"radio",id:`onDelivery-${s.name}`,name:"paymentType",checked:o===s.name,onChange:()=>i(s.name)}),e.jsx("label",{htmlFor:`onDelivery-${s.name}`,className:"flex items-center justify-center cursor-pointer hover:bg-gray-50 p-2 rounded-lg",children:e.jsx("img",{src:s.icon||z,alt:s.name,className:"w-12 h-12 object-contain bg-transparent",onError:l=>{const d=l.target;d.src!==z&&(d.onerror=null,d.src=z)}})})]},s.name))}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"radio",id:"immediate",name:"paymentMethod",checked:v==="immediate",onChange:()=>f("immediate")}),e.jsx("label",{htmlFor:"immediate",className:"font-medium",children:"Ø¯ÙØ¹ ÙÙˆØ±ÙŠ"})]}),v==="immediate"&&e.jsx("div",{className:"mr-6 grid grid-cols-3 gap-3",children:W.immediate.methods.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"radio",id:`immediate-${s.name}`,name:"paymentType",checked:o===s.name,onChange:()=>i(s.name)}),e.jsx("label",{htmlFor:`immediate-${s.name}`,className:"flex items-center justify-center cursor-pointer hover:bg-gray-50 p-3 rounded-lg transition-colors",children:e.jsx("img",{src:s.icon||z,alt:s.name,className:"w-20 h-20 object-contain bg-transparent",onError:l=>{const d=l.target;d.src!==z&&(d.onerror=null,d.src=z)}})})]},s.name))})]})})]}),e.jsxs(S,{children:[e.jsx(M,{children:e.jsx(P,{children:"Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø´Ø­Ù† ÙˆØ§Ù„ØªÙˆØµÙŠÙ„"})}),e.jsx(k,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"radio",id:"normal-tripoli",name:"shippingType",checked:p==="normal-tripoli",onChange:()=>b("normal-tripoli")}),e.jsx("label",{htmlFor:"normal-tripoli",className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Ø¹Ø§Ø¯ÙŠ Ø¯Ø§Ø®Ù„ Ø·Ø±Ø§Ø¨Ù„Ø³"}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:"24-96 Ø³Ø§Ø¹Ø©"})]})]}),e.jsx("div",{className:"text-lg font-bold text-primary",children:"30-45 Ø¯.Ù„"})]})})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"radio",id:"normal-outside",name:"shippingType",checked:p==="normal-outside",onChange:()=>b("normal-outside")}),e.jsx("label",{htmlFor:"normal-outside",className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Ø¹Ø§Ø¯ÙŠ Ø®Ø§Ø±Ø¬ Ø·Ø±Ø§Ø¨Ù„Ø³"}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:"24-96 Ø³Ø§Ø¹Ø©"})]})]}),e.jsx("div",{className:"text-lg font-bold text-primary",children:"50-85 Ø¯.Ù„"})]})})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"radio",id:"express-tripoli",name:"shippingType",checked:p==="express-tripoli",onChange:()=>b("express-tripoli")}),e.jsx("label",{htmlFor:"express-tripoli",className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:["Ø³Ø±ÙŠØ¹ Ø¯Ø§Ø®Ù„ Ø·Ø±Ø§Ø¨Ù„Ø³",e.jsx(ae,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Ø³Ø±ÙŠØ¹"})]}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:"9-12 Ø³Ø§Ø¹Ø©"})]})]}),e.jsx("div",{className:"text-lg font-bold text-primary",children:"85-120 Ø¯.Ù„"})]})})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"radio",id:"express-outside",name:"shippingType",checked:p==="express-outside",onChange:()=>b("express-outside")}),e.jsx("label",{htmlFor:"express-outside",className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:["Ø³Ø±ÙŠØ¹ Ø®Ø§Ø±Ø¬ Ø·Ø±Ø§Ø¨Ù„Ø³",e.jsx(ae,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Ø³Ø±ÙŠØ¹"})]}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:"9-12 Ø³Ø§Ø¹Ø©"})]})]}),e.jsx("div",{className:"text-lg font-bold text-primary",children:"120-185 Ø¯.Ù„"})]})})]})]})})]}),e.jsxs(S,{children:[e.jsx(M,{children:e.jsx(P,{children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©"})}),e.jsx(k,{children:e.jsx(ce,{value:c,onChange:s=>T(s.target.value),placeholder:"Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø£Ùˆ ØªÙˆØµÙŠØ§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø·Ù„Ø¨...",rows:3})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(S,{children:[e.jsx(M,{children:e.jsx(P,{children:"Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨"})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ (",a.reduce((s,l)=>s+l.quantity,0)," Ù‚Ø·Ø¹Ø©)"]}),e.jsxs("span",{className:"font-semibold",children:[L," Ø¯.Ù„"]})]}),N>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{children:["Ø§Ù„ØªØ®ÙÙŠØ¶ (",u==null?void 0:u.discount,"%)"]}),e.jsxs("span",{className:"font-semibold",children:["-",N," Ø¯.Ù„"]})]}),r>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Ø§Ù„Ø´Ø­Ù† ÙˆØ§Ù„ØªÙˆØµÙŠÙ„"}),e.jsxs("span",{className:"font-semibold",children:[r," Ø¯.Ù„"]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ"}),e.jsxs("span",{className:"text-primary",children:[j," Ø¯.Ù„"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"ÙƒÙˆØ¨ÙˆÙ† Ø§Ù„ØªØ®ÙÙŠØ¶"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{value:y,onChange:s=>w(s.target.value),placeholder:"Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†"}),e.jsx(g,{variant:"outline",onClick:I,children:"ØªØ·Ø¨ÙŠÙ‚"})]}),O&&e.jsxs("p",{className:"text-green-600 text-sm flex items-center gap-1",children:[e.jsx(ue,{className:"h-4 w-4"}),"Ù…Ø¨Ø±ÙˆÙƒ Ø±Ø¨Ø­Øª Ù…Ø¹Ù†Ø§ ØªØ®ÙÙŠØ¶ Ø¨Ù‚ÙŠÙ…Ø© ",u==null?void 0:u.discount,"% Ù…Ù† Ø¥Ø¬Ù…Ø§Ù„ÙŠ ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨!"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{variant:"outline",className:"w-full",onClick:X,children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø³Ù„Ø©"}),e.jsx(g,{className:"w-full bg-primary hover:bg-primary/90",onClick:E,children:"Ù…Ø¹Ø§Ù…Ù„Ø§Øª"})]})]})]}),e.jsxs(S,{children:[e.jsx(M,{children:e.jsx(P,{children:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"})}),e.jsx(k,{className:"space-y-3",children:a.map(s=>{const l=oe(s.product,U);return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-white border flex-shrink-0 flex items-center justify-center",children:e.jsxs("picture",{children:[l.pictureSources.map(d=>{const _=me(d);return e.jsx("source",{srcSet:d,..._?{type:_}:{}},d)}),e.jsx("img",{src:l.primary,alt:s.product.name,loading:"lazy",decoding:"async",className:"w-full h-full object-cover","data-image-sources":JSON.stringify(l.datasetSources),"data-image-index":"0","data-fallback-src":U,onError:xe})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.product.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:[s.size," â€¢ ",s.color]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Ø§Ù„ÙƒÙ…ÙŠØ©: ",s.quantity]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"font-bold text-primary",children:[s.product.price*s.quantity," Ø¯.Ù„"]})})]},`${s.product.id}-${s.size}-${s.color}`)})})]})]})]})},Le=({orderData:a,onBack:t,onPaymentComplete:m})=>{var w,I,O,X,F;const[v,f]=h.useState(!1),[o,i]=h.useState(!1),b=((I=(((w=W.immediate)==null?void 0:w.methods)??[]).find(n=>n.name===a.payment.type))==null?void 0:I.name)??a.payment.type??"Ù…Ø¹Ø§Ù…Ù„Ø§Øª",c=a.payment.method==="immediate",L=((((O=a.customer)==null?void 0:O.name)??"").trim()||`${((X=a.customer)==null?void 0:X.firstName)??""} ${((F=a.customer)==null?void 0:F.lastName)??""}`.trim()).trim()||"Ø¹Ù…ÙŠÙ„ Ù…Ø³Ø¬Ù„",N=c?"Ø§Ù„Ø¯ÙØ¹":"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨",r=c?`Ø¯ÙØ¹ ÙÙˆØ±ÙŠ Ø¹Ø¨Ø± ${b}`:"Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…";h.useEffect(()=>{a.payment.method==="immediate"&&ge().catch(n=>{})},[a.payment.method]);const j=async()=>{var n;if(a.payment.method==="immediate"){i(!0),f(!0);try{const x=(a.payment.type||"ORD").toString().replace(/\s+/g,"").toUpperCase().slice(0,8)||"ORD";await fe({amountLYD:Number(a.total),referencePrefix:x,orderId:a.id,customerMobile:(n=a.customer)==null?void 0:n.phone,additionalConfig:{PaymentChannel:a.payment.type},onComplete:E=>{u(E),i(!1),f(!1)},onError:E=>{y(E),i(!1),f(!1)},onCancel:()=>{i(!1),f(!1)}})}catch{i(!1),f(!1),alert("ØªØ¹Ø°Ø± ÙØªØ­ Ø¨ÙˆØ§Ø¨Ø© Ù…Ø¹Ø§Ù…Ù„Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.")}return}i(!0),setTimeout(()=>{const x={...a,id:se(),date:new Date().toISOString(),status:"confirmed"};i(!1),m(x)},1500)},u=n=>{const x={...a,id:se(),date:new Date().toISOString(),status:"confirmed",paymentDetails:n};m(x)},y=n=>{const x=(n==null?void 0:n.error)||(n==null?void 0:n.message)||n||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";alert(`ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø¯ÙØ¹: ${x}`)};return e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs(S,{children:[e.jsx(M,{children:e.jsxs(P,{className:"text-center flex items-center justify-center gap-2",children:[e.jsx(Ce,{className:"h-6 w-6"}),"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨"]})}),e.jsxs(k,{className:"space-y-6",children:[c&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 text-center text-sm font-semibold py-2 rounded-lg",children:"Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¯ÙØ¹ Ù…Ø¹Ø§Ù…Ù„Ø§Øª"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©:"}),e.jsxs("span",{children:[a.total," Ø¯.Ù„"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:"}),e.jsx("span",{children:r})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Ø§Ù„Ø¹Ù…ÙŠÙ„:"}),e.jsx("span",{children:L})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(g,{variant:"outline",className:"flex-1",onClick:t,disabled:o,children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Ø§Ù„Ø¹ÙˆØ¯Ø©"]}),e.jsx(g,{className:"flex-1 bg-green-600 hover:bg-green-700 text-white",onClick:j,disabled:o,children:o?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c?v?"Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ø¨ÙˆØ§Ø¨Ø© Ù…Ø¹Ø§Ù…Ù„Ø§Øª...":"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¯ÙØ¹...":"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©..."]}):N})]})]})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white px-6 py-4 rounded-lg shadow-lg text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ø¨ÙˆØ§Ø¨Ø© Ù…Ø¹Ø§Ù…Ù„Ø§Øª..."})]})})]})};export{Ve as default};
