import{r as m,j as e,P as G,C as y,w as A,x as _,V as M,B as h,a as w,X as H,L as x,I as j,A as je,f as fe}from"./index-CcNjQh2v.js";import{T as be}from"./textarea-BJcIlJeV.js";import{B as K}from"./badge-DXI0UTzt.js";import{P as ve}from"./progress-BR-MhhGD.js";import{T as Ne,a as ye,b as W,c as X,S as we}from"./tabs-BgnLgdgE.js";import{S as Z,a as Q,b as Y,c as D,d as c}from"./select-CA2aZ3FQ.js";import{g as ee,h as Se}from"./imageUtils-BY3jZOGV.js";import{I as se}from"./image-DnUiUMoT.js";import{P as ae}from"./plus-pekqOudl.js";import{F as S}from"./file-text-B80GRBIb.js";import{C as Pe}from"./chevron-left-kv53weib.js";import{C as Ce}from"./chevron-right-CYK_ERRK.js";import{E as Ie}from"./eye-BU6p52cQ.js";import{T as ke}from"./trash-2-NiObV7lF.js";import{U as le}from"./upload-BwtSVCl2.js";const ze=["500 مل","1 لتر","1 كيلو غرام","3 كيلو غرام","500 جرام","2 كيلو غرام","5 لتر","10 لتر","25 كيلو غرام","50 كيلو غرام"],ie=[{value:"best_selling",label:"أكثر مبيعاً",color:"bg-red-500"},{value:"most_requested",label:"أكثر طلباً",color:"bg-blue-500"},{value:"most_viewed",label:"أكثر مشاهدة",color:"bg-green-500"},{value:"new",label:"جديد",color:"bg-purple-500"},{value:"discount",label:"تخفيضات",color:"bg-orange-500"},{value:"out_of_stock",label:"غير متوفر",color:"bg-gray-500"}],He=({storeData:t,merchantData:Ee,onBack:te,onComplete:re})=>{const[ne,ce]=m.useState("products"),[u,N]=m.useState([]),[g,P]=m.useState([]),[T,U]=m.useState([]),[C,$]=m.useState(0),[I,L]=m.useState({}),k=m.useRef(null),z=m.useRef(null),[r,o]=m.useState({nameAr:"",nameEn:"",description:"",price:"",originalPrice:"",discountPercent:"",images:[],imageUrls:[],sizes:[],selectedSizes:[],category:(t==null?void 0:t.category)||"cleaning",quantity:"",tags:[],badge:"",customSize:""}),[oe,f]=m.useState(!1),[p,E]=m.useState(null);m.useEffect(()=>{if(t!=null&&t.subdomain){const s=localStorage.getItem(`store_products_${t.subdomain}`);if(s)try{const i=JSON.parse(s).filter(n=>{var d;return!((d=n.name)!=null&&d.includes("منتج جديد"))}).map(n=>({...n,nameAr:n.nameAr||n.name||"",nameEn:n.nameEn||""}));N(i)}catch{}const a=localStorage.getItem(`store_sliders_${t.subdomain}`);if(a)try{P(JSON.parse(a))}catch{}}},[t]),m.useEffect(()=>{if(g.length>1){const s=setInterval(()=>{$(a=>(a+1)%g.length)},5e3);return()=>clearInterval(s)}},[g.length]);const q=s=>{const a=["image/jpeg","image/jpg","image/webp","image/png","image/bmp","image/gif","image/tiff","application/pdf","image/avif","image/svg+xml"],l=[".jpg",".jpeg",".png",".webp",".bmp",".gif",".tiff",".svg",".pdf",".avif"],i=Array.from(s).filter(n=>{var v;const d="."+((v=n.name.split(".").pop())==null?void 0:v.toLowerCase()),b=a.includes(n.type.toLowerCase()),F=l.includes(d);return!b&&!F?(alert(`نوع الملف غير مدعوم: ${n.name}. الامتدادات المدعومة: ${l.join(", ")}`),!1):!0});i.length>0&&o(n=>({...n,images:[...n.images,...i],imageUrls:[...n.imageUrls,...i.map(d=>URL.createObjectURL(d))]}))},O=s=>{const a=["image/jpeg","image/jpg","image/webp","image/png","image/bmp","image/gif","image/tiff","application/pdf","image/avif","image/svg+xml"],l=[".jpg",".jpeg",".png",".webp",".bmp",".gif",".tiff",".svg",".pdf",".avif"],i=Array.from(s).filter(n=>{var v;const d="."+((v=n.name.split(".").pop())==null?void 0:v.toLowerCase()),b=a.includes(n.type.toLowerCase()),F=l.includes(d);return!b&&!F?(alert(`نوع الملف غير مدعوم: ${n.name}. الامتدادات المدعومة: ${l.join(", ")}`),!1):!0});i.length>0&&(U(n=>[...n,...i]),P(n=>[...n,...i.map(d=>URL.createObjectURL(d))]))},R=s=>{s.preventDefault(),s.stopPropagation()},V=(s,a)=>{s.preventDefault(),s.stopPropagation();const l=s.dataTransfer.files;l&&l.length>0&&a(l)},de=s=>{o(a=>({...a,images:a.images.filter((l,i)=>i!==s),imageUrls:a.imageUrls.filter((l,i)=>i!==s)}))},me=s=>{P(a=>a.filter((l,i)=>i!==s)),U(a=>a.filter((l,i)=>i!==s))},ge=s=>{o(a=>({...a,selectedSizes:a.selectedSizes.includes(s)?a.selectedSizes.filter(l=>l!==s):[...a.selectedSizes,s]}))},B=(s,a)=>{L(l=>{const i=l[s]||0,n=u.find(b=>b.id===s);if(!n||n.images.length<=1)return l;let d;return a==="next"?d=(i+1)%n.images.length:d=i===0?n.images.length-1:i-1,{...l,[s]:d}})},xe=()=>{if(!r.nameAr.trim()||!r.price){alert("يرجى إدخال اسم المنتج وسعره على الأقل");return}const s={id:(p==null?void 0:p.id)||Date.now(),nameAr:r.nameAr,nameEn:r.nameEn,description:r.description,price:parseFloat(r.price)||0,originalPrice:parseFloat(r.originalPrice)||parseFloat(r.price)||0,...r.discountPercent&&{discountPercent:parseFloat(r.discountPercent)},images:r.imageUrls.length>0?r.imageUrls:[ee(t==null?void 0:t.subdomain)],sizes:r.selectedSizes,availableSizes:r.selectedSizes,category:r.category,inStock:!0,quantity:parseInt(r.quantity)||0,tags:r.tags,...r.badge&&{badge:r.badge}};N(p?a=>a.map(l=>l.id===p.id?s:l):a=>[...a,s]),o({nameAr:"",nameEn:"",description:"",price:"",originalPrice:"",discountPercent:"",images:[],imageUrls:[],sizes:[],selectedSizes:[],category:(t==null?void 0:t.category)||"cleaning",quantity:"",tags:[],badge:"",customSize:""}),f(!1),E(null)},he=s=>{var a;E(s),o({nameAr:s.nameAr,nameEn:s.nameEn,description:s.description,price:s.price.toString(),originalPrice:s.originalPrice.toString(),discountPercent:((a=s.discountPercent)==null?void 0:a.toString())||"",images:[],imageUrls:s.images,sizes:s.sizes,selectedSizes:s.availableSizes,category:s.category,quantity:s.quantity.toString(),tags:s.tags,badge:s.badge||"",customSize:""}),f(!0)},ue=s=>{confirm("هل أنت متأكد من حذف هذا المنتج؟")&&N(a=>a.filter(l=>l.id!==s))},pe=()=>{if(!(t!=null&&t.subdomain)){alert("خطأ: بيانات المتجر غير مكتملة. يرجى المحاولة مرة أخرى.");return}try{localStorage.setItem(`store_products_${t.subdomain}`,JSON.stringify(u)),localStorage.setItem(`store_sliders_${t.subdomain}`,JSON.stringify(g));const a=JSON.parse(localStorage.getItem("eshro_stores")||"[]").map(l=>l.subdomain===t.subdomain?{...l,setupComplete:!0}:l);localStorage.setItem("eshro_stores",JSON.stringify(a)),alert("تم حفظ جميع البيانات بنجاح! متجرك الآن جاهز ومُعروض على المنصة"),re()}catch{alert("حدث خطأ أثناء حفظ البيانات. يرجى المحاولة مرة أخرى.")}},J=u.length>0;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["إعداد متجر ",t==null?void 0:t.nameAr]}),e.jsx("p",{className:"text-gray-600",children:"أضف منتجاتك وصور السلايدر لإكمال إعداد المتجر"}),e.jsxs("div",{className:"mt-4",children:[e.jsx(ve,{value:u.length>0?100:0,className:"w-full max-w-md mx-auto"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[u.length," منتج • ",g.length," صورة سلايدر"]})]})]}),e.jsxs(Ne,{value:ne,onValueChange:ce,className:"w-full",children:[e.jsxs(ye,{className:"grid w-full grid-cols-2 mb-8",children:[e.jsxs(W,{value:"products",className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"إدارة المنتجات (",u.length,")"]}),e.jsxs(W,{value:"sliders",className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"صور السلايدر (",g.length,")"]})]}),e.jsx(X,{value:"products",className:"space-y-6",children:e.jsxs(y,{children:[e.jsx(A,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-blue-600"}),"منتجات المتجر"]}),e.jsxs(h,{onClick:()=>f(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"إضافة منتج جديد"]})]})}),e.jsx(w,{children:u.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(G,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد منتجات بعد"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"ابدأ بإضافة منتجاتك الأولى"}),e.jsxs(h,{onClick:()=>f(!0),children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"إضافة المنتج الأول"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(s=>{var a;return e.jsx(y,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"aspect-square bg-gray-100 rounded-lg mb-4 relative overflow-hidden group",children:[(()=>{const l=I[s.id]||0,i=s.images[l]||s.images[0];return i&&i.endsWith(".pdf")?e.jsx("div",{className:"w-full h-full bg-red-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(S,{className:"h-12 w-12 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-red-600",children:"PDF"})]})}):e.jsx("img",{src:i||ee(t==null?void 0:t.subdomain),alt:s.nameAr,className:"w-full h-full object-cover",onError:n=>{Se(n,t==null?void 0:t.subdomain)}})})(),s.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:l=>{l.stopPropagation(),B(s.id,"prev")},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white rounded-full w-8 h-8 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70","aria-label":"الصورة السابقة",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:l=>{l.stopPropagation(),B(s.id,"next")},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white rounded-full w-8 h-8 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70","aria-label":"الصورة التالية",children:e.jsx(Ce,{className:"h-4 w-4"})})]}),s.images.length>1&&e.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1",children:s.images.map((l,i)=>e.jsx("button",{onClick:n=>{n.stopPropagation(),L(d=>({...d,[s.id]:i}))},className:`w-2 h-2 rounded-full transition-colors ${(I[s.id]||0)===i?"bg-white":"bg-white/50"}`,"aria-label":`الصورة ${i+1} من ${s.images.length}`},i))}),s.images.length>1&&e.jsxs("div",{className:"absolute top-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:[(I[s.id]||0)+1,"/",s.images.length]}),s.badge&&e.jsx(K,{className:"absolute top-2 right-2",children:(a=ie.find(l=>l.value===s.badge))==null?void 0:a.label})]}),e.jsx("h4",{className:"font-semibold text-lg mb-2",children:s.nameAr}),s.nameEn&&e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:s.nameEn}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"text-lg font-bold text-green-600",children:[s.price," د.ل"]}),s.originalPrice>s.price&&e.jsxs("span",{className:"text-sm text-gray-500 line-through",children:[s.originalPrice," د.ل"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{size:"sm",variant:"outline",onClick:()=>he(s),children:e.jsx(Ie,{className:"h-3 w-3"})}),e.jsx(h,{size:"sm",variant:"outline",onClick:()=>ue(s.id),children:e.jsx(ke,{className:"h-3 w-3"})})]}),e.jsx(K,{variant:s.inStock?"default":"secondary",children:s.inStock?"متوفر":"غير متوفر"})]})]})},s.id)})})})]})}),e.jsx(X,{value:"sliders",className:"space-y-6",children:e.jsxs(y,{children:[e.jsxs(A,{children:[e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-purple-600"}),"صور السلايدر"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"أضف صوراً تعرض في سلايدر متجرك لجذب العملاء"})]}),e.jsxs(w,{children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors cursor-pointer",onDragOver:R,onDrop:s=>V(s,O),onClick:()=>{var s;return(s=z.current)==null?void 0:s.click()},children:[e.jsx(le,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"اسحب وأفلت صور السلايدر هنا"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"أو انقر لاختيار الصور"}),e.jsx("input",{ref:z,type:"file",multiple:!0,accept:"image/jpeg,image/jpg,image/webp,image/png,image/bmp,image/gif,image/tiff,application/pdf,image/avif,image/svg+xml",onChange:s=>s.target.files&&O(s.target.files),className:"hidden",id:"slider-images","aria-label":"رفع صور السلايدر"}),e.jsx(h,{type:"button",variant:"outline",onClick:()=>{var s;return(s=z.current)==null?void 0:s.click()},children:"اختر الصور"})]}),g.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h4",{className:"font-semibold mb-4",children:["الصور المختارة (",g.length,")"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"معاينة السلايدر (يتحرك كل 5 ثواني)"}),e.jsxs("div",{className:"relative w-full h-48 bg-gray-100 rounded-lg overflow-hidden",children:[g.map((s,a)=>{var i;return((i=T[a])==null?void 0:i.type)==="application/pdf"?e.jsx("div",{className:`absolute inset-0 w-full h-full bg-red-50 flex items-center justify-center transition-opacity duration-1000 ${a===C?"opacity-100":"opacity-0"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(S,{className:"h-16 w-16 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-red-600 font-medium",children:"ملف PDF"})]})},a):e.jsx("img",{src:s,alt:`Slider ${a+1}`,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ${a===C?"opacity-100":"opacity-0"}`},a)}),e.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2",children:g.map((s,a)=>e.jsx("button",{onClick:()=>$(a),className:`w-2 h-2 rounded-full transition-colors ${a===C?"bg-white":"bg-white/50"}`,"aria-label":`صورة السلايدر ${a+1} من ${g.length}`},a))})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:g.map((s,a)=>{var i;const l=((i=T[a])==null?void 0:i.type)==="application/pdf";return e.jsxs("div",{className:"relative group",children:[l?e.jsx("div",{className:"w-full h-32 bg-red-50 border border-red-200 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(S,{className:"h-10 w-10 text-red-500 mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-red-600",children:"PDF"})]})}):e.jsx("img",{src:s,alt:`Slider ${a+1}`,className:"w-full h-32 object-cover rounded-lg border"}),e.jsx("button",{type:"button",title:"حذف صورة السلايدر",onClick:()=>me(a),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(H,{className:"h-3 w-3"})})]},a)})})]})]})]})})]}),oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(y,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(A,{children:e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-blue-600"}),p?"تعديل المنتج":"إضافة منتج جديد"]})}),e.jsxs(w,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"product-name-ar",children:"اسم المنتج بالعربية *"}),e.jsx(j,{id:"product-name-ar",value:r.nameAr,onChange:s=>o(a=>({...a,nameAr:s.target.value})),placeholder:"أدخل اسم المنتج بالعربية"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"product-name-en",children:"اسم المنتج بالإنجليزية"}),e.jsx(j,{id:"product-name-en",value:r.nameEn,onChange:s=>o(a=>({...a,nameEn:s.target.value})),placeholder:"أدخل اسم المنتج بالإنجليزية"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"product-description",children:"وصف المنتج"}),e.jsx(be,{id:"product-description",value:r.description,onChange:s=>o(a=>({...a,description:s.target.value})),placeholder:"وصف تفصيلي للمنتج",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"product-price",children:"السعر *"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{id:"product-price",type:"number",value:r.price,onChange:s=>o(a=>({...a,price:s.target.value})),placeholder:"0.00",className:"pr-12"}),e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"د.ل"})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"product-original-price",children:"السعر قبل التخفيض"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{id:"product-original-price",type:"number",value:r.originalPrice,onChange:s=>o(a=>({...a,originalPrice:s.target.value})),placeholder:"0.00",className:"pr-12"}),e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"د.ل"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"product-quantity",children:"الكمية المتوفرة"}),e.jsx(j,{id:"product-quantity",type:"number",value:r.quantity,onChange:s=>o(a=>({...a,quantity:s.target.value})),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"التصنيف"}),e.jsxs(Z,{value:r.category,onValueChange:s=>o(a=>({...a,category:s})),children:[e.jsx(Q,{children:e.jsx(Y,{placeholder:"اختر التصنيف"})}),e.jsx(D,{children:(t==null?void 0:t.category)==="cleaning_supplies"?e.jsxs(e.Fragment,{children:[e.jsx(c,{value:"مستلزمات مساحيق الغسالات",children:"مستلزمات مساحيق الغسالات"}),e.jsx(c,{value:"مستلزمات تنظف ارضيات",children:"مستلزمات تنظف ارضيات"}),e.jsx(c,{value:"مستلزمات التنظيف للغاز",children:"مستلزمات التنظيف للغاز"}),e.jsx(c,{value:"مستلزمات تنظيف الخشب",children:"مستلزمات تنظيف الخشب"}),e.jsx(c,{value:"مستلزمات تنظيف الزجاج",children:"مستلزمات تنظيف الزجاج"}),e.jsx(c,{value:"مستلزمات تنظيف وإزالة البقع",children:"مستلزمات تنظيف وإزالة البقع"}),e.jsx(c,{value:"معطرات جو",children:"معطرات جو"}),e.jsx(c,{value:"معطرات أرضيات",children:"معطرات أرضيات"}),e.jsx(c,{value:"مساحيق تلميع",children:"مساحيق تلميع"}),e.jsx(c,{value:"مستلزمات مركبات",children:"مستلزمات مركبات"}),e.jsx(c,{value:"مستلزمات العناية بالبشرة",children:"مستلزمات العناية بالبشرة"}),e.jsx(c,{value:"مستلزمات العناية الشخصية",children:"مستلزمات العناية الشخصية"}),e.jsx(c,{value:"مستلزمات المطابخ",children:"مستلزمات المطابخ"}),e.jsx(c,{value:"مستلزمات المناسبات والاعياد",children:"مستلزمات المناسبات والاعياد"}),e.jsx(c,{value:"مستلزمات الاطفال",children:"مستلزمات الاطفال"}),e.jsx(c,{value:"العطورات الخشبية والبخور",children:"العطورات الخشبية والبخور"}),e.jsx(c,{value:"العطور النسائية",children:"العطور النسائية"}),e.jsx(c,{value:"العطور الرجالية",children:"العطور الرجالية"}),e.jsx(c,{value:"عطور للاطفال",children:"عطور للاطفال"})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{value:"cleaning",children:"مواد تنظيف"}),e.jsx(c,{value:"electronics",children:"إلكترونيات"}),e.jsx(c,{value:"fashion",children:"أزياء"}),e.jsx(c,{value:"home",children:"منزل وحديقة"}),e.jsx(c,{value:"sports",children:"رياضة"})]})})]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"شارة المنتج"}),e.jsxs(Z,{value:r.badge,onValueChange:s=>o(a=>({...a,badge:s})),children:[e.jsx(Q,{children:e.jsx(Y,{placeholder:"اختر شارة (اختياري)"})}),e.jsxs(D,{children:[e.jsx(c,{value:"",children:"بدون شارة"}),ie.map(s=>e.jsx(c,{value:s.value,children:s.label},s.value))]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"صور المنتج"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors cursor-pointer",onDragOver:R,onDrop:s=>V(s,q),onClick:()=>{var s;return(s=k.current)==null?void 0:s.click()},children:[e.jsx(le,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"اسحب وأفلت الصور هنا"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"أو انقر لاختيار الصور"}),e.jsx("input",{ref:k,type:"file",multiple:!0,accept:"image/jpeg,image/jpg,image/webp,image/png,image/bmp,image/gif,image/tiff,application/pdf,image/avif,image/svg+xml",onChange:s=>s.target.files&&q(s.target.files),className:"hidden",id:"product-form-images","aria-label":"رفع صور المنتج"}),e.jsx(h,{type:"button",variant:"outline",size:"sm",onClick:()=>{var s;return(s=k.current)==null?void 0:s.click()},children:"اختر الصور"})]}),r.imageUrls.length>0&&e.jsx("div",{className:"mt-4 grid grid-cols-3 gap-2",children:r.imageUrls.map((s,a)=>{var i;const l=((i=r.images[a])==null?void 0:i.type)==="application/pdf";return e.jsxs("div",{className:"relative group",children:[l?e.jsx("div",{className:"w-full h-20 bg-red-50 border border-red-200 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(S,{className:"h-8 w-8 text-red-500 mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-red-600",children:"PDF"})]})}):e.jsx("img",{src:s,alt:`Product ${a+1}`,className:"w-full h-20 object-cover rounded-lg border"}),e.jsx("button",{type:"button",title:"حذف صورة المنتج",onClick:()=>de(a),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(H,{className:"h-3 w-3"})})]},a)})})]}),e.jsxs("div",{children:[e.jsx(x,{children:"الأحجام المتوفرة"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:ze.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:`size-${s}`,"aria-label":`حجم ${s}`,checked:r.selectedSizes.includes(s),onChange:()=>ge(s),className:"rounded"}),e.jsx(x,{htmlFor:`size-${s}`,className:"text-sm",children:s})]},s))}),e.jsxs("div",{className:"mt-4",children:[e.jsx(x,{htmlFor:"custom-size",children:"حجم مخصص (اختياري)"}),e.jsx(j,{id:"custom-size",value:r.customSize,onChange:s=>o(a=>({...a,customSize:s.target.value})),onKeyDown:s=>{if(s.key==="Enter"&&r.customSize.trim()){const a=r.customSize.trim();r.selectedSizes.includes(a)?o(l=>({...l,customSize:""})):o(l=>({...l,selectedSizes:[...l.selectedSizes,a],customSize:""}))}},placeholder:"أدخل حجم مخصص (مثل: 2.5 لتر، 500 مل، 1 كيلو)",className:"mt-1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"اضغط Enter لإضافة الحجم المخصص"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(h,{variant:"outline",onClick:()=>{f(!1),E(null),o({nameAr:"",nameEn:"",description:"",price:"",originalPrice:"",discountPercent:"",images:[],imageUrls:[],sizes:[],selectedSizes:[],category:(t==null?void 0:t.category)||"cleaning",quantity:"",tags:[],badge:"",customSize:""})},children:"إلغاء"}),e.jsxs(h,{onClick:xe,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),p?"تحديث المنتج":"حفظ المنتج"]})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-12 pt-8 border-t",children:[e.jsxs(h,{variant:"outline",onClick:te,className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),"العودة"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[!J&&e.jsx("p",{className:"text-sm text-gray-500",children:"يجب إضافة منتج واحد على الأقل"}),e.jsxs(h,{onClick:pe,disabled:!J,className:"bg-green-600 hover:bg-green-700 flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"حفظ البيانات والانتهاء"]})]})]})]})})};export{He as default};
