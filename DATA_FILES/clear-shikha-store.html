<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<script type="text/javascript">
  // This is a CodeSandbox injection script that's used to
  // add navigation and inspector functionality to the preview
  (function () {
    // 1) Get the <script> tag that's currently running:
    var me = document.currentScript;

    // 2) Create the blockingâ€style <script> to load:
    var script = document.createElement("script");
    script.src = "https://codesandbox.io/p/preview-protocol.js";

    // By default a dynamicallyâ€inserted <script> is async=true.
    // Turn async off to make it behave like a normal blocking <script>:
    script.async = false;
    // (Do NOT set defer.)

    // 3) Insert it immediately after the current <script>:
    me.parentNode.insertBefore(script, me);
  })();

  const isIFramePreview = window.top !== window.self;

  // Only run this script in editor context
  if (isIFramePreview) {
    // This script is used to enable Chrome DevTools functionality
    (function () {
      var script = document.createElement("script");
      script.src =
        "https://codesandbox.io/p/chrome-devtool/protocol/index.js";

      script.onload = () => {
        const devtoolProtocol = window.chobitsu;
        if (devtoolProtocol) {
          window.addEventListener("message", (event) => {
            const { type, data } = event.data;

            if (type === "FROM_DEVTOOL") {
              devtoolProtocol.sendRawMessage(data);
            }
          });

          devtoolProtocol.setOnMessage((data) => {
            if (data.includes('"id":"tmp')) {
              return;
            }

            window.parent.postMessage({ type: "TO_DEVTOOL", data }, "*");
          });

          devtoolProtocol.sendRawMessage(
            `{"id":5,"method":"Runtime.enable","params":{}}`
          );
        }        
      }

      (document.head || document.documentElement).prepend(script);
    })();
  }

  if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === "undefined") {
    let nextID = 0;
    let hook = (__REACT_DEVTOOLS_GLOBAL_HOOK__ = {
      renderers: new Map(),
      supportsFiber: true,
      inject: (renderer) => {
        const id = nextID++;
        hook.renderers.set(id, renderer);
        return id;
      },
      onScheduleFiberRoot() {},
      onCommitFiberRoot() {},
      onCommitFiberUnmount() {},
    });
  }

  document.currentScript.remove();
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙ†Ø¸ÙŠÙ Ù…ØªØ¬Ø± Ø´ÙŠØ®Ø© - Clear Shikha Store</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Cairo', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            max-width: 600px;
            width: 100%;
            text-align: center;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 28px;
            font-weight: bold;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .warning-box {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin: 25px 0;
            text-align: right;
        }
        
        .warning-title {
            font-weight: bold;
            color: #856404;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .warning-text {
            color: #856404;
            line-height: 1.6;
        }
        
        .btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            font-weight: bold;
            min-width: 160px;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #dc3545, #c82333);
            color: white;
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(45deg, #6c757d, #5a6268);
            color: white;
            box-shadow: 0 5px 15px rgba(108, 117, 125, 0.3);
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(108, 117, 125, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(45deg, #28a745, #218838);
            color: white;
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
        }
        
        .status {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: bold;
            text-align: right;
        }
        
        .status-info {
            background-color: #cce7ff;
            color: #004085;
            border: 1px solid #99d1ff;
        }
        
        .status-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .store-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: right;
            border: 1px solid #dee2e6;
        }
        
        .store-name {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .store-desc {
            color: #666;
            margin-bottom: 10px;
        }
        
        .data-item {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        
        .data-label {
            font-weight: bold;
            color: #333;
        }
        
        .data-value {
            color: #007bff;
        }
        
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            text-align: right;
        }
        
        .loading {
            background: #e9ecef;
            color: #495057;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§¹ ØªÙ†Ø¸ÙŠÙ Ù…ØªØ¬Ø± Ø´ÙŠØ®Ø©</h1>
        <div class="subtitle">
            Ø£Ø¯Ø§Ø© ØªÙ†Ø¸ÙŠÙ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ¬Ø± Ø´ÙŠØ®Ø© ÙÙŠ localStorage
        </div>
        
        <div class="store-info">
            <div class="store-name">ğŸª Ù…ØªØ¬Ø± Ø´ÙŠØ®Ø©</div>
            <div class="store-desc">Ù…Ù„Ø§Ø¨Ø³ Ù†Ø³Ø§Ø¦ÙŠØ© Ø±Ø§Ù‚ÙŠØ©</div>
            
            <div class="data-item">
                <span class="data-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</span>
                <span class="data-value">3 Ù…Ù†ØªØ¬Ø§Øª</span>
            </div>
            <div class="data-item">
                <span class="data-label">Ø§Ù„ÙØ¦Ø©:</span>
                <span class="data-value">Ø§Ù„Ø£Ø²ÙŠØ§Ø¡ ÙˆØ§Ù„Ù…Ù„Ø§Ø¨Ø³</span>
            </div>
            <div class="data-item">
                <span class="data-label">Ø§Ù„Ø­Ø§Ù„Ø©:</span>
                <span class="data-value">Ù†Ø´Ø·</span>
            </div>
        </div>
        
        <div class="warning-box">
            <div class="warning-title">âš ï¸ ØªØ­Ø°ÙŠØ± Ù…Ù‡Ù…</div>
            <div class="warning-text">
                Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¯Ø§Ø© Ø³ØªÙ‚ÙˆÙ… Ø¨Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ù…ØªØ¬Ø± Ø´ÙŠØ®Ø© Ù…Ù† localStorage.
                ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ù‚Ø¨Ù„ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠ Ø²Ø±.
            </div>
        </div>
        
        <div class="status status-info" id="currentStatus">
            ğŸ“Š Ø­Ø§Ù„Ø© localStorage: Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...
        </div>
        
        <div class="btn-group">
            <button onclick="checkStoreData()" class="btn btn-secondary">
                ğŸ” ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            </button>
            <button onclick="clearStoreData()" class="btn btn-primary">
                ğŸ—‘ï¸ Ø­Ø°Ù Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±
            </button>
            <button onclick="clearAllData()" class="btn btn-primary">
                ğŸ—‘ï¸ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            </button>
            <button onclick="restoreStore()" class="btn btn-success">
                ğŸ”„ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù…ØªØ¬Ø±
            </button>
        </div>
        
        <div class="btn-group">
            <a href="http://localhost:5174" target="_blank" rel="noopener" class="btn btn-success">
                ğŸš€ Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚
            </a>
            <button onclick="location.reload()" class="btn btn-secondary">
                ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„
            </button>
        </div>
        
        <div id="result" class="result loading">
            Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠ Ø²Ø± Ø£Ø¹Ù„Ø§Ù‡ Ù„Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªÙ†Ø¸ÙŠÙ Ø£Ùˆ Ø§Ù„ÙØ­Øµ.
        </div>
    </div>

    <script>
        function updateStatus(message, type = 'info') {
            const statusDiv = document.getElementById('currentStatus');
            statusDiv.textContent = message;
            statusDiv.className = `status status-${type}`;
        }
        
        function updateResult(message, type = 'loading') {
            const resultDiv = document.getElementById('result');
            resultDiv.textContent = message;
            resultDiv.className = `result ${type}`;
        }
        
        function checkStoreData() {
            updateResult('ğŸ” Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...', 'loading');
            
            try {
                const shikhaProducts = localStorage.getItem('store_products_shikha');
                const shikhaSliders = localStorage.getItem('store_sliders_shikha');
                const shikhaFiles = localStorage.getItem('eshro_store_files_shikha');
                
                let message = 'ğŸ“‹ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ÙØ­Øµ:\\n\\n';
                
                if (shikhaProducts) {
                    const products = JSON.parse(shikhaProducts);
                    message += `âœ… Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±: ${products.length} Ù…Ù†ØªØ¬\\n`;
                } else {
                    message += 'âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©\\n';
                }
                
                if (shikhaSliders) {
                    const sliders = JSON.parse(shikhaSliders);
                    message += `âœ… ØµÙˆØ± Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø±: ${sliders.length} ØµÙˆØ±Ø©\\n`;
                } else {
                    message += 'âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ± Ø³Ù„Ø§ÙŠØ¯Ø± Ù…Ø­ÙÙˆØ¸Ø©\\n';
                }
                
                if (shikhaFiles) {
                    message += 'âœ… Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ØªØ¬Ø± Ù…ÙˆØ¬ÙˆØ¯Ø©\\n';
                } else {
                    message += 'âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª Ù…ØªØ¬Ø± Ù…Ø­ÙÙˆØ¸Ø©\\n';
                }
                
                message += `\\nğŸ“Š Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ ÙÙŠ localStorage: ${localStorage.length}`;
                
                updateResult(message, 'success');
                updateStatus(`âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${localStorage.length} Ø¹Ù†ØµØ± ÙÙŠ localStorage`, 'success');
                
            } catch (error) {
                updateResult(`âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}`, 'error');
                updateStatus('âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
            }
        }
        
        function clearStoreData() {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ¬Ø± Ø´ÙŠØ®Ø©ØŸ')) {
                return;
            }
            
            updateResult('ğŸ—‘ï¸ Ø¬Ø§Ø±ÙŠ Ø­Ø°Ù Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±...', 'loading');
            
            try {
                // Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ù…ØªØ¬Ø± Ø´ÙŠØ®Ø©
                const keysToRemove = [
                    'store_products_shikha',
                    'store_sliders_shikha',
                    'eshro_store_files_shikha'
                ];
                
                let deletedCount = 0;
                keysToRemove.forEach(key => {
                    if (localStorage.getItem(key)) {
                        localStorage.removeItem(key);
                        deletedCount++;
                    }
                });
                
                updateResult(`âœ… ØªÙ… Ø­Ø°Ù ${deletedCount} Ø¹Ù†ØµØ± Ù…ØªØ¹Ù„Ù‚ Ø¨Ù…ØªØ¬Ø± Ø´ÙŠØ®Ø©`, 'success');
                updateStatus(`ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù ${deletedCount} Ø¹Ù†ØµØ±`, 'success');
                
                // ÙØ­Øµ Ø³Ø±ÙŠØ¹ Ø¨Ø¹Ø¯ Ø§Ù„Ø­Ø°Ù
                setTimeout(() => {
                    const remainingItems = localStorage.length;
                    updateStatus(`ğŸ“Š Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ ÙÙŠ localStorage: ${remainingItems} Ø¹Ù†ØµØ±`, 'info');
                }, 1000);
                
            } catch (error) {
                updateResult(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}`, 'error');
                updateStatus('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
            }
        }
        
        function clearAllData() {
            if (!confirm('âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø³ÙŠØ­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage!\\n\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ')) {
                return;
            }
            
            updateResult('ğŸ—‘ï¸ Ø¬Ø§Ø±ÙŠ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...', 'loading');
            
            try {
                const beforeCount = localStorage.length;
                localStorage.clear();
                
                updateResult(`âœ… ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (${beforeCount} Ø¹Ù†ØµØ±)`, 'success');
                updateStatus('ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'success');
                
            } catch (error) {
                updateResult(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}`, 'error');
                updateStatus('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
            }
        }
        
        function restoreStore() {
            updateResult('ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…ØªØ¬Ø± Ø´ÙŠØ®Ø©...', 'loading');
            
            try {
                // ÙØ­Øµ Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…ØªØ¬Ø± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„ÙÙ‡Ø±Ø³
                fetch('http://localhost:4000/assets/stores/index.json')
                    .then(response => response.json())
                    .then(stores => {
                        const shikhaStore = stores.find(store => store.slug === 'shikha');
                        
                        if (shikhaStore) {
                            updateResult(
                                `âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…ØªØ¬Ø± Ø´ÙŠØ®Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…!\\n\\n` +
                                `Ø§Ù„Ø§Ø³Ù…: ${shikhaStore.nameAr}\\n` +
                                `Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: ${shikhaStore.productsCount}\\n` +
                                `Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ${new Date(shikhaStore.lastUpdated).toLocaleString('ar')}\\n\\n` +
                                `ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ ÙˆØ³ØªØ¬Ø¯ Ù…ØªØ¬Ø± Ø´ÙŠØ®Ø© ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØ§Ø¬Ø±.`,
                                'success'
                            );
                            updateStatus('âœ… Ø§Ù„Ù…ØªØ¬Ø± Ù…ØªØ§Ø­ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…', 'success');
                        } else {
                            updateResult('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…ØªØ¬Ø± Ø´ÙŠØ®Ø© ÙÙŠ ÙÙ‡Ø±Ø³ Ø§Ù„Ù…ØªØ§Ø¬Ø±', 'error');
                            updateStatus('âŒ Ø§Ù„Ù…ØªØ¬Ø± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…', 'error');
                        }
                    })
                    .catch(error => {
                        updateResult(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`, 'error');
                        updateStatus('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…', 'error');
                    });
                
            } catch (error) {
                updateResult(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù…ØªØ¬Ø±: ${error.message}`, 'error');
                updateStatus('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù…ØªØ¬Ø±', 'error');
            }
        }
        
        // ÙØ­Øµ ÙÙˆØ±ÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('load', () => {
            updateStatus(`ğŸ“Š Ø­Ø§Ù„Ø© localStorage: ${localStorage.length} Ø¹Ù†ØµØ± Ù…Ø­ÙÙˆØ¸`, 'info');
        });
        
        console.log('ğŸ§¹ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø£Ø¯Ø§Ø© ØªÙ†Ø¸ÙŠÙ Ù…ØªØ¬Ø± Ø´ÙŠØ®Ø©');
    </script>
</body>
</html>