import{r as o}from"./index-CcNjQh2v.js";import{u as E,b as A}from"./index-CJjg3exO.js";function T(n,e){return o.useReducer((r,t)=>e[r][t]??r,n)}var v=n=>{const{present:e,children:r}=n,t=R(e),a=typeof r=="function"?r({present:t.isPresent}):o.Children.only(r),c=E(t.ref,P(a));return typeof r=="function"||t.isPresent?o.cloneElement(a,{ref:c}):null};v.displayName="Presence";function R(n){const[e,r]=o.useState(),t=o.useRef(null),a=o.useRef(n),c=o.useRef("none"),p=n?"mounted":"unmounted",[N,s]=T(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const i=l(t.current);c.current=N==="mounted"?i:"none"},[N]),A(()=>{const i=t.current,m=a.current;if(m!==n){const f=c.current,u=l(i);n?s("MOUNT"):u==="none"||(i==null?void 0:i.display)==="none"?s("UNMOUNT"):s(m&&f!==u?"ANIMATION_OUT":"UNMOUNT"),a.current=n}},[n,s]),A(()=>{if(e){let i;const m=e.ownerDocument.defaultView??window,d=u=>{const g=l(t.current).includes(CSS.escape(u.animationName));if(u.target===e&&g&&(s("ANIMATION_END"),!a.current)){const O=e.style.animationFillMode;e.style.animationFillMode="forwards",i=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=O)})}},f=u=>{u.target===e&&(c.current=l(t.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{m.clearTimeout(i),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else s("ANIMATION_END")},[e,s]),{isPresent:["mounted","unmountSuspended"].includes(N),ref:o.useCallback(i=>{t.current=i?getComputedStyle(i):null,r(i)},[])}}function l(n){return(n==null?void 0:n.animationName)||"none"}function P(n){var t,a;let e=(t=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:t.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?n.ref:(e=(a=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:a.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?n.props.ref:n.props.ref||n.ref)}function I(n){const e=o.useRef(n);return o.useEffect(()=>{e.current=n}),o.useMemo(()=>(...r)=>{var t;return(t=e.current)==null?void 0:t.call(e,...r)},[])}var C=o.createContext(void 0);function U(n){const e=o.useContext(C);return n||e||"ltr"}export{v as P,I as a,U as u};
