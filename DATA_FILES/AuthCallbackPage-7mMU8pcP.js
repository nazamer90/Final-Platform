import{r as n,j as e}from"./index-CcNjQh2v.js";const h=()=>{const[o,t]=n.useState("loading"),[g,s]=n.useState("");return n.useEffect(()=>{(async()=>{try{const r=new URLSearchParams(window.location.search),a=r.get("code"),c=r.get("state"),i=r.get("error");if(i){t("error"),s(`خطأ في Google OAuth: ${i}`),setTimeout(()=>{window.location.href="/"},2e3);return}if(!a||!c){t("error"),s("معاملات استدعاء الرجوع غير صحيحة"),setTimeout(()=>{window.location.href="/"},2e3);return}try{const l=JSON.parse(atob(c));console.log("State validation:",l)}catch(l){console.warn("Could not validate state:",l)}const d={id:"google-"+Math.random().toString(36).substr(2,9),email:"user@gmail.com",name:"Google User",picture:"https://via.placeholder.com/40",provider:"google",code:a};localStorage.setItem("eshro_google_user",JSON.stringify(d)),localStorage.setItem("eshro_google_auth_code",a),localStorage.setItem("eshro_logged_in_via_google","true"),localStorage.setItem("eshro_current_user",JSON.stringify({...d,token:"google-token-"+Date.now(),userType:"user",loginTime:new Date().toISOString()})),t("success"),setTimeout(()=>{window.location.href="/"},1e3)}catch{t("error"),s("حدث خطأ في معالجة البيانات من Google"),setTimeout(()=>{window.location.href="/"},2e3)}})()},[]),e.jsx("div",{className:"w-full h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"text-center",children:[o==="loading"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 text-lg",children:"جاري معالجة بيانات تسجيل الدخول..."})]}),o==="success"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-green-600 text-5xl mb-4",children:"✓"}),e.jsx("p",{className:"text-green-700 text-lg",children:"تم تسجيل الدخول بنجاح!"}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"جاري إعادة التوجيه..."})]}),o==="error"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-red-600 text-5xl mb-4",children:"✕"}),e.jsx("p",{className:"text-red-700 text-lg",children:g}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"جاري إعادة التوجيه..."})]})]})})};export{h as default};
